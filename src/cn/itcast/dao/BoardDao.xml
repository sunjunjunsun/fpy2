<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.itcast.dao.BoardDao">

   <select id="getBoardBySn" resultMap="boardstatus" >
      select tb.serialNumber bsn,tb.boardType bboardtype,tb.testerName btestername,tb.testStatus bteststatus,tb.testTime btesttime,ts.serial_number tsserialnumber,ts.location slocation,ts.pin spin,
      ts.err_code serrcode,ts.repair_status srepairstatus,ts.image_filename simagefilename,ts.algorithm salgorithm,ts.sub_type ssubtype
      from t_status ts, tt_borders tb
      where ts.serial_number = tb.serialNumber AND tb.serialNumber = #{serialnumber} 
   
   </select>
   <resultMap id="boardstatus" type="board">
        <result property="serialnumber" column="bsn" />
        <result property="boardtype" column="bboardtype" />
        <result property="testername" column="btestername" />
        <result property="teststatus" column="bteststatus" />
        <result property="testtime" column="btesttime" />
        
    <collection property="status" ofType="status" >
        <result property="serialnumber" column="tsserialnumber"/>
   	    <result property="location" column="slocation" />
   	    <result property="pin" column="spin" />
   	    <result property="errcode" column="serrcode" />
   	    <result property="repairstatus" column="srepairstatus" />
   	    <result property="imagefilename" column="simagefilename" />
   	    <result property="algorithm" column="salgorithm" />
   	    <result property="subtype" column="ssubtype" />
   	</collection> 
   
   </resultMap>
   
   

</mapper>